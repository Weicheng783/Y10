{"remainingRequest":"/home/csimage/Desktop/group_repo/cultime_frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/home/csimage/Desktop/group_repo/cultime_frontend/src/views/WatchList.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/csimage/Desktop/group_repo/cultime_frontend/src/views/WatchList.vue","mtime":1615917639513},{"path":"/home/csimage/Desktop/group_repo/cultime_frontend/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/csimage/Desktop/group_repo/cultime_frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/csimage/Desktop/group_repo/cultime_frontend/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/csimage/Desktop/group_repo/cultime_frontend/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/csimage/Desktop/group_repo/cultime_frontend/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaDEsIGRpdiwgcCB7CiAgY29sb3I6d2hpdGU7Cn0KCkBrZXlmcmFtZXMgbmF2aV9lbnRlciB7CiAgMCUgICB7IHdpZHRoOjUwJTsgaGVpZ2h0OmF1dG87fQoKICAxMDAlIHt3aWR0aDoyMDBweDsgaGVpZ2h0OmF1dG87fQp9CgoubW92aWVCbG9jayB7CiAgLyogZGlzcGxheTpmbGV4OyAgKi8KICB0ZXh0LWFsaWduOmxlZnQ7CiAgbWFyZ2luOiBhdXRvOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgYmFja2dyb3VuZC1jb2xvcjojMjYyNzI4OwogIGJvcmRlci1yYWRpdXM6IDI1cHg7CiAgbWFyZ2luLWJvdHRvbTogMzBweDsKICBtYXgtd2lkdGg6IDgwMHB4OwogIGNvbG9yOndoaXRlOwp9CgoKI3JlbW92ZU1vdmllQnV0dG9uIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjRkZBNzJCOwogIGJvcmRlci1jb2xvcjogI0ZGQTcyQjsKfQoKI3JlbW92ZU1vdmllQnV0dG9uOmhvdmVyIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzc4MDFlOwogIGJvcmRlci1jb2xvcjogI2M3ODAxZTsKfQoKCgovKiBTRUFSQ0ggQkFSIENTUyAqLwoKCg=="},{"version":3,"sources":["WatchList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA","file":"WatchList.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n     <div id=\"navigation\">\n       <b-nav tabs>\n         <div id='logo'>\n          <a href=\"\" style=\"background-color: black; width:200px;height:auto;padding: 0px 20px;position:relative;top:10px; float:left; margin-top:20px; margin-left:25px;\"><img style=\" \" src=\"https://i.ibb.co/7t9FYRv/Screenshot-2021-03-01-at-22-22-49.png\" \n                alt=\"--Cultime--\"  border=\"0\"></a>\n                <!-- animation-name: logo; animation-duration:6s; -->\n          </div>\n     \n      <router-link to=\"/feed\" >Feed</router-link> |\n      <router-link to=\"/watchlist\" >Watch List</router-link> |\n      <router-link to=\"/following\" >Following</router-link> |\n      <router-link to=\"/recommended\" >Recommended</router-link> |\n      <router-link to=\"/profile\" >Profile</router-link>\n  \n      <button @click=\"$emit('logOut')\" id='logout_button' style='color:#fe5e73 ;background-color:#4267B2;'>Logout</button>\n        </b-nav>\n\n      </div>  \n\n      <p class=\"title is-2\" style=\"color:white; margin: 60px; font-family:'Times New Roman', Times, serif;\">Your private <img style=\"width:200px;height:auto;padding: 0px ; animation-name: navi_enter; animation-duration:2s; \" src=\"https://i.ibb.co/7t9FYRv/Screenshot-2021-03-01-at-22-22-49.png\" \n                alt=\"Cultime\" border=\"0\"> watchlist</p>\n\n      <!-- Needs to be stylized and it is not working -->\n      <autocomplete @submit=\"addNewMovie\" :search=\"search\" style=\"max-width: 450px; margin: auto; padding-bottom: 60px;\" defaultValue=\"Add new movies\"></autocomplete>\n\n      <div v-for=\"movie in watchList\" :key=\"movie.movieTitle\" class=\"movieBlock\">\n        <div style=\"display:flex; padding-left: 20px; padding-top: 20px;\">\n          <div>\n            <img style=\"border-radius:20px; max-width:200px;\" v-bind:src=\" 'https://image.tmdb.org/t/p/w500/' + movie.moviePoster\">\n          </div>\n\n          <div style=\"padding-left: 20px; padding-bottom: 20px;\">\n            <h1 style=\"color:white; margin:0px;\" class=\"title is-3\">\n              {{movie.movieTitle}}\n            </h1>\n            <p style=\"max-width: 450px; color:gray;\">\n              {{movie.yearProduction}}\n            </p>\n            <p style=\"margin-bottom: 20px; margin-top: 20px; max-width: 450px;\">\n              {{movie.shortSummary}}\n            </p>\n\n            <div v-for=\"n in movie.rating\" :key=\"n\" style=\"display:inline-block;\">\n              <img src=\"https://upload.wikimedia.org/wikipedia/commons/4/44/Plain_Yellow_Star.png\" width=\"35px;\">\n            </div>\n          </div>\n        </div>\n\n        <div style=\"text-align:right; padding: 0px 20px 20px 0px;\">\n          <button class=\"button\" id=\"removeMovieButton\" v-on:click=\"removeMovie(movie.id)\">Remove Movie</button>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script>\n// @ is an alias to /src\n// import HelloWorld from '@/components/HelloWorld.vue'\n\nimport axios from 'axios'\n\nexport default {\n  name: 'WatchList',\n  data() {\n    return {\n        watchList: [\n          {\n            movieId: 771,\n            movieTitle: \"Home Alone\",\n            rating: 5,\n            yearProduction: 2000,\n            shortSummary: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\",\n            moviePoster: 'encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqWnWRWHFfmWcuTBva6CnPam3OWuNxBOI-oA&usqp=CAU',\n          },\n          {\n            movieTitle: \"Home Alone 3\",\n            rating: 4,\n            yearProduction: 2002,\n            shortSummary: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\",\n            moviePoster: 'encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqWnWRWHFfmWcuTBva6CnPam3OWuNxBOI-oA&usqp=CAU',\n          },\n        ],\n        movieSearchQueue: [\n\n        ],\n    }\n  },\n  methods: {\n    search(input) {\n      if(!(typeof input === 'string' || input instanceof String)) {return [];}\n      if(input.length < 3) {return [];}\n      return axios.post('http://localhost:8000/searchmovie/', {\n        title: input\n      }\n      ).then( data => {\n        this.movieSearchQueue = [];\n        let movies = []\n        for(let i=0;i<data.data.length;i++) {\n          this.movieSearchQueue.push({movieId: data.data[i]['id'],title: data.data[i]['title'] + \" (\" + data.data[i]['release_date'] + \")\"});\n          movies.push(data.data[i]['title'] + \" (\" + data.data[i]['release_date'] + \")\");\n        }\n        return movies;\n      })\n    },\n    updateWatchList() {\n      console.log(\"CALLED\");\n      var objectToken = localStorage.getItem('jwt');\n      var currentToken = JSON.parse( objectToken );\n      axios.get('http://localhost:8000/watchlist/', {\n          headers: {\n            Authorization: \"Bearer \" + currentToken.access\n          }\n        }).then(\n          data => {\n            this.watchList = [];\n            for(let i=0;i<data.data.length;i++) {\n              this.watchList.push({\n                id: data.data[i]['movie']['id'],\n                movieTitle: data.data[i]['movie']['movie_name'],\n                shortSummary: data.data[i]['movie']['overview'],\n                yearProduction: data.data[i]['movie']['production_year'],\n                moviePoster: data.data[i]['movie']['poster_path'],\n                rating: data.data[i]['movie']['rating'],\n              });\n            }\n            this.watchList = this.watchList.reverse();\n          }\n        );\n    },\n    addNewMovie(result) {\n      for(let i=0;i<this.movieSearchQueue.length;i++) {\n        if(result == this.movieSearchQueue[i]['title']) {\n          var objectToken = localStorage.getItem('jwt');\n          var currentToken = JSON.parse( objectToken );\n          console.log(currentToken.access);\n\n          axios.post('http://localhost:8000/watchlist/',{movie_id: this.movieSearchQueue[i]['movieId']}, {\n              headers: {\n                  'authorization': 'Bearer ' + currentToken.access,\n                  'Accept' : 'application/json',\n                  'Content-Type': 'application/json'\n              }\n          }).then(() => {this.updateWatchList();});\n        }\n      }\n    },\n    removeMovie(inputIdIn) {\n      var objectToken = localStorage.getItem('jwt');\n      var currentToken = JSON.parse( objectToken );\n      console.log(inputIdIn);\n      axios.post('http://localhost:8000/deletewatchlist/', {id: inputIdIn}, {\n          headers: {\n            'authorization': 'Bearer ' + currentToken.access,\n            'Accept' : 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }\n      ).then(()=>{this.updateWatchList();});\n    }\n  },\n  mounted() {\n      var objectToken = localStorage.getItem('jwt');\n      var currentToken = JSON.parse( objectToken );\n      axios.get('http://localhost:8000/watchlist/', {\n          headers: {\n            Authorization: \"Bearer \" + currentToken.access\n          }\n        }).then(\n          data => {\n            this.watchList = [];\n            for(let i=0;i<data.data.length;i++) {\n              this.watchList.push({\n                id: data.data[i]['movie']['id'],\n                movieTitle: data.data[i]['movie']['movie_name'],\n                shortSummary: data.data[i]['movie']['overview'],\n                yearProduction: data.data[i]['movie']['production_year'],\n                moviePoster: data.data[i]['movie']['poster_path'],\n                rating: data.data[i]['movie']['rating'],\n              });\n            }\n            this.watchList = this.watchList.reverse();\n          }\n        );\n    // call refresh token\n    // if error call logout\n\n    axios.post('http://localhost:8000/refresh/', {\n      refresh: currentToken.refresh\n    }).catch(function() {\n      this.$emit('logOut');\n    }).then(response => {\n      localStorage.setItem('jwt', JSON.stringify(response.data));\n    });\n\n  }\n}\n</script>\n\n<style>\nh1, div, p {\n  color:white;\n}\n\n@keyframes navi_enter {\n  0%   { width:50%; height:auto;}\n\n  100% {width:200px; height:auto;}\n}\n\n.movieBlock {\n  /* display:flex;  */\n  text-align:left;\n  margin: auto;\n  flex-direction: column;\n  background-color:#262728;\n  border-radius: 25px;\n  margin-bottom: 30px;\n  max-width: 800px;\n  color:white;\n}\n\n\n#removeMovieButton {\n  background-color: #FFA72B;\n  border-color: #FFA72B;\n}\n\n#removeMovieButton:hover {\n  background-color: #c7801e;\n  border-color: #c7801e;\n}\n\n\n\n/* SEARCH BAR CSS */\n\n\n</style>"]}]}